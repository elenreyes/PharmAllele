<!DOCTYPE html>
<html>
<head>
    <title>Resultados de búsqueda combinada</title>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #4CAF50; color: white; }
        .highlight { background-color: #f9f9d5; padding: 2px 5px; }
    </style>
</head>
<body>
    <h1>Results found</h1>
    
    <!-- Formulario de búsqueda -->
    <form class="search-panel">
        <label>Drug: <input type="text" name="drug" value="{{ drug if drug else '' }}"></label>
        <label>Variant: <input type="text" name="variant" value="{{ variant if variant else '' }}"></label>
        <button type="submit">Buscar</button>
    </form>
    
    <p>Searching drugs as: <span class="highlight">{{ drug if drug else 'Cualquiera' }}</span> 
       and variants as: <span class="highlight">{{ variant if variant else 'Cualquiera' }}</span></p>
    
    <a href="/">← Volver al buscador</a>

    <!-- Tabla con id para DataTables -->
    <table id="table-output">
        <thead>
            <tr>
                <th>Drug</th>
                <th>Variant</th>
                <th>Phenotype category</th>
                <th>Illness</th>
                <th>Evidence</th>
            </tr>
        </thead>
        <tbody>
            {% if results %}
                {% for res in results %}
                <tr>
                    <td>{{ res.drugs_drug_name }}</td>
                    <td>{{ res.variants_variant_name }}</td>
                    <td>{{ res.phenotype_category_phenotype_category }}</td>
                    <td>{{ res.illness_illness_name }}</td>
                    <td>{{ res.evidence_category_evidence_category }}</td>
                </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
    
    {% if not results %}
    <p>No se han encontrado asociaciones para esa combinación.</p>
    {% endif %}
    
    <!-- Div para el gráfico -->
    <div id="myDiv" style="width:100%; height:400px; margin-top: 30px;"></div>

    <!-- Tu script -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
